# 要求定義書

**プロジェクト名**：Personal Gateway Site（Notion風）  
**作成者**：伊藤晶  
**作成日**：2025-10-07
---

## 1. 背景

- 発信・実績は **GitHub／LinkedIn** 等に分散。  
  個人サイトは **独自ドメインの“入口（ハブ）”** として、各媒体へ迷いなく誘導する役割を担う。
- 学習課題として **ALB / EC2 / RDS / ACM / Route53 / VPC（0から構築）** を用いる。
- **GitHub Education（Student Developer Pack 等）** を活用し、開発～プレビュー～CI/CD のコストを極小化する。

---

## 2. 目的

- **独自ドメイン + HTTPS** の“Notion風”入口サイトを公開し、訪問者が **1分以内に主要リンクへ到達** できる状態を実現。  
- **RDS へのデータ保存**（例：問い合わせ）を最小機能として備え、DB 連携の証跡を残す。  
- **運用コスト最小**かつ**更新が速い**体制を定義（Git 操作中心）。

---

## 3. 成果物（アウトプット）

- 稼働 URL（`https://www.<my-domain>`）および画面スクリーンショット一式  
- 最小機能デモ（トップ／リンク集／問い合わせ→RDS 保存／`/health`）  
- 構成図（論理図）  
- 動作確認ログ、受け入れ結果一覧  
- 運用メモ（費用／停止・再開／片付け順）

---

## 4. スコープ

### 4.1 In-Scope
- ページ：トップ、リンク集（GitHub・Zenn・Qiita・SNS 等）、問い合わせフォーム、`/health`  
- スマホ/PC 対応、独自ドメイン + HTTPS、基本 SEO/OGP、最低限のアクセス計測  
- **GitHub Education 無償枠**を前提とした開発・プレビュー・CI/CD フロー

### 4.2 Out-of-Scope
- 本格 CMS、会員機能、全文検索、多言語、決済、商用 SLA

---

## 5. 想定ユーザーと価値

| ユーザー | 価値 |
|-----------|------|
| 採用担当・協業先 | 1つのURLからプロフィール・実績リンクへ即到達 |
| 技術者 | 一次情報（GitHub等）に迷わず遷移 |
| 自分（運用者） | Git中心で更新完結／ランニング費用が小さい |

---

## 6. 機能要求（What）

| ID | 要求 | 概要 | 受け入れ条件 |
|----|------|------|---------------|
| F-01 | トップ表示 | プロフィール要点＋主CTA（GitHubなど） | 200応答／主要リンクへ1クリック導線 |
| F-02 | リンク集 | GitHub／Zenn／Qiita／SNS／メール等の一覧 | 外部リンクが視認性高く並ぶ／遷移機能 |
| F-03 | 問い合わせ | フォーム送信 → **RDS保存** | 入力項目OK／送信成功で1レコード保存／エラー時に理由表示 |
| F-04 | ヘルスチェック | 稼働確認用エンドポイント | `GET /health` が200で`ok`応答 |
| F-05 | 解析 | 最低限の可視化（UU／PV／流入元） | 日次UU・PV・流入上位5を週次閲覧可能 |
| F-06 | エラーページ | 404/500 の体裁 | 不正URL→404、内部エラー→500 |

### F-03 入力項目（要求レベル）

| 項目 | 必須 | 制約 | 目的 |
|------|------|------|------|
| Email | 必須 | 形式チェック | 返信・連絡 |
| 本文 | 必須 | 最大1000文字 | 要件把握 |
| 氏名 | 任意 | 50文字以内 | 宛名 |
| 同意チェック | 必須 | 送信前に同意 | プライバシーポリシー同意取得 |

- **保持期間**：問い合わせデータは **90日以内**。以後削除可能な状態であること。

---

## 7. 非機能要求（品質）

| 区分 | 要件 |
|------|------|
| セキュリティ | 常時HTTPS／DB非公開／秘密情報は環境変数管理／SSM等利用／Bot対策（CAPTCHA or rate limit） |
| 可用性 | ALB配下で正常稼働（ターゲットHealthy=1） |
| 性能 | Lighthouse(Desktop) 80+／CLS<0.1／JS<300KB |
| 運用性（SLO） | main→本番反映≤10分／失敗→直前版復帰≤10分 |
| 観測性 | CloudWatch Logs 30日保持 |
| コスト | 月額上限設定＋Budgets 80%通知 |
| 法令/規約 | プライバシーポリシー掲出／送信前同意 |
| アクセシビリティ | Tab操作可／alt属性必須／コントラスト比4.5:1以上 |

---

## 8. デザイン要求（“Notion風”）

- 配色：白＋黒／グレー基調＋アクセント1色  
- タイポ：太字見出し＋シンプル本文  
- 余白：上下64〜120px／左右24〜80px  
- 線・形：1pxライン／最小限アイコン  
- 動き：フェード中心（過度な演出なし）  
- レスポンシブ：3画面幅で崩れ無し

**受け入れ基準**：上記6項目に合致し、主要デバイスでUI崩れがないこと。

---

## 9. 与件・制約

- 使用サービス：ALB／EC2／RDS／ACM／Route53／VPC（0から構築）  
- Docker：ローカル任意（不要でも可）  
- GitHub Education：Codespaces／Actions等を活用してゼロコスト開発  
- 詳細構成（リージョン・タイプ等）は次工程で確定

---

## 10. 受け入れ基準（Definition of Done）

- `https://www.<my-domain>` がTLS有効で表示  
- `GET /health` が200  
- F-03：バリデーション＋RDS保存＋保持期間文書化  
- F-05：UU/PV/流入上位5を週次確認可能  
- ALBターゲットHealthy  
- 主要リンク有効  
- 運用SLO（反映≤10分／復帰≤10分）実証済  
- プライバシーポリシー掲出＋送信前同意あり  
- 予算アラート80%通知確認  
- `/docs/`に構成図・スクショ・Lighthouse・費用メモ・手順を保存

---

## 11. リスクと軽減策

| リスク | 兆候 | 軽減策 |
|--------|------|--------|
| HTTPS詰まり | TLS設定エラー | DNS検証レコード設定を手順化 |
| SGルート迷子 | 疎通不可 | ALB→EC2→RDSの確認順序を手順化 |
| スパム送信 | 問い合わせ急増 | Bot対策必須（CAPTCHA系 or rate limit） |
| コスト膨張 | 想定超過 | 予算アラート＋片付け手順を定期実践 |

---

